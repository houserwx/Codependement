# Research Agent Integration Guide

This document explains how the Research Agent integrates with MCP servers to enhance the multi-agent system capabilities.

## Overview

The Research Agent is a specialized component that leverages Model Context Protocol (MCP) servers to gather relevant information for tasks generated by the Planner Agent. This intelligence is then made available to other agents to improve their performance and decision-making.

## Architecture

```
┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│  Planner Agent  │    │  Research Agent  │    │   MCP Servers   │
│                 │    │                  │    │                 │
│ • Creates tasks │◄──►│ • Gathers info   │◄──►│ • Filesystem    │
│ • Assigns work  │    │ • Caches results │    │ • Web search    │
│ • Coordinates   │    │ • Analyzes needs │    │ • APIs          │
└─────────────────┘    └──────────────────┘    │ • Documentation │
                                ▼               └─────────────────┘
                       ┌──────────────────┐
                       │  Other Agents    │
                       │                  │
                       │ • Coder Agent    │
                       │ • Tester Agent   │
                       │ • Debugger Agent │
                       │ • Documenter     │
                       └──────────────────┘
```

## Research Process

1. **Task Analysis**: The Research Agent analyzes task descriptions to identify information needs
2. **Query Generation**: Generates specific research queries based on task type and context
3. **MCP Integration**: Uses available MCP servers to gather relevant information
4. **Information Processing**: Processes and formats research findings
5. **Context Enhancement**: Provides research results to other agents via task context
6. **Caching**: Stores results for future use to improve performance

## Research Capabilities

### Automatic Research Areas
- **Implementation Tasks**: Code examples, best practices, documentation
- **Debugging Tasks**: Error patterns, debugging guides, solutions
- **Testing Tasks**: Test examples, testing frameworks, patterns
- **API Tasks**: API documentation, usage examples
- **Language-Specific**: TypeScript/JavaScript patterns, Node.js examples

### MCP Server Integration
- **Filesystem Server**: Access to local files and documentation
- **Web Search**: Online resources and documentation
- **Custom Servers**: Domain-specific tools and resources

## Usage Examples

### Automatic Research (via Planner)
```
User: "implement a REST API with authentication and error handling"

Planner creates subtasks:
1. Research API patterns and authentication methods (Research Agent)
2. Analyze requirements and design architecture (Coder Agent + research)
3. Implement core API functionality (Coder Agent + research)
4. Create comprehensive tests (Tester Agent + research)
5. Debug and fix issues (Debugger Agent + research)
6. Create documentation (Documenter Agent + research)
```

### Direct Research Commands
```
User: "research TypeScript error handling patterns"
Result: Dedicated research task executed by Research Agent
```

### MCP Status Check
```
User: "mcp status"
Result: Shows connected MCP servers, tools, and resources
```

## Configuration

### Extension Settings
```json
{
  "codependent.enableMcp": true,
  "codependent.mcpServers": [
    {
      "name": "filesystem",
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-filesystem", "/path/to/workspace"]
    },
    {
      "name": "web-search",
      "command": "node",
      "args": ["./mcp-servers/web-search.js"]
    }
  ]
}
```

## Benefits

### For Development Teams
- **Informed Decisions**: Agents have access to relevant documentation and examples
- **Best Practices**: Automatic research ensures current best practices are followed
- **Reduced Errors**: Research helps prevent common mistakes and issues
- **Consistency**: Cached research provides consistent information across tasks

### For Individual Developers
- **Learning**: Discover new patterns and approaches through research
- **Efficiency**: Agents work with better context and information
- **Quality**: Higher quality code and documentation through research-backed decisions
- **Productivity**: Less time spent manually researching solutions

## Troubleshooting

### MCP Connection Issues
1. Check if MCP servers are running
2. Verify server configurations in settings
3. Check VS Code developer console for error messages
4. Use `mcp status` command to diagnose issues

### Research Quality Issues
1. Ensure relevant MCP servers are connected
2. Check if research cache needs clearing
3. Verify task descriptions are clear and specific
4. Review available tools and resources

### Performance Optimization
1. Use research caching effectively
2. Configure appropriate MCP servers for your needs
3. Monitor resource usage and adjust server configurations
4. Clear cache periodically to prevent staleness

## Extending Research Capabilities

### Adding Custom MCP Servers
1. Create or install MCP server following the protocol specification
2. Add server configuration to extension settings
3. Restart VS Code to load new server
4. Test with `mcp status` command

### Custom Research Queries
The Research Agent automatically generates queries based on task content, but you can influence this by:
- Using specific keywords in task descriptions
- Providing detailed context in multi-agent tasks
- Using direct research commands for targeted information gathering

## Future Enhancements

Planned improvements to the Research Agent include:
- Advanced query optimization
- Machine learning-based relevance scoring
- Integration with more MCP server types
- Custom research workflow configuration
- Research result quality metrics
- Collaborative research between multiple agents
